(function(t){function e(e){for(var r,s,p=e[0],h=e[1],n=e[2],l=0,d=[];l<p.length;l++)s=p[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in h)Object.prototype.hasOwnProperty.call(h,r)&&(t[r]=h[r]);c&&c(e);while(d.length)d.shift()();return o.push.apply(o,n||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],r=!0,p=1;p<i.length;p++){var h=i[p];0!==a[h]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var r={},a={app:0},o=[];function s(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=r,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/x-cropper/";var p=window["webpackJsonp"]=window["webpackJsonp"]||[],h=p.push.bind(p);p.push=e,p=p.slice();for(var n=0;n<p.length;n++)e(p[n]);var c=h;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"3eee":function(t,e,i){},"43e7":function(t,e,i){"use strict";i("3eee")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var r=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-navigation-drawer",{style:{margin:"20px 0 0 0",display:"flex",flexWrap:"wrap",flexDirection:"column",justifyContent:"space-around",alignContent:"center"},attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("a",{attrs:{href:"https://www.foma-blog.ru",target:"_blank"}},[i("v-img",{attrs:{"max-width":"100px",src:t.logo,title:"www.foma-blog.ru",alt:"www.foma-blog.ru"}})],1)]),i("v-app-bar",{attrs:{app:""}},[i("v-toolbar-title",{on:{click:function(e){t.drawer=!0}}},[i("v-icon",[t._v("mdi-crop")]),t._v(" X-Cropper ")],1),i("v-spacer"),i("v-btn",{attrs:{icon:"",color:"primary",href:"https://www.npmjs.com/package/x-cropper"}},[i("v-icon",{attrs:{large:""}},[t._v(" mdi-npm ")])],1),i("v-btn",{attrs:{icon:"",color:"primary",href:"https://github.com/mrsky1001/x-cropper"}},[i("v-icon",{attrs:{large:""}},[t._v(" mdi-github ")])],1),i("v-btn",{attrs:{icon:"",color:"primary",href:"https://foma-blog.ru/"}},[i("v-img",{style:{width:"95px",margin:"8px 0 0 9px"},attrs:{alt:"www.foma-blog.ru",title:"www.foma-blog.ru",src:"https://foma-blog.ru/assets/fb15.svg"}})],1)],1),i("v-main",[i("v-container",{attrs:{fluid:""}},[i("x-cropper")],1)],1),i("v-footer",{attrs:{app:""}})],1)},o=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:"cropper "+t.opts.cropperClasses},[i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",staticClass:"cropper-fileInput",attrs:{type:"file"},on:{change:t.selectFile}}),t.file?t._e():i("div",{staticClass:"cropper-droparea",on:{drop:function(e){return e.preventDefault(),t.dropFile.apply(null,arguments)},dragover:function(t){t.preventDefault()}}},[i("i",[t._v(t._s(t.opts.dropareaLabel))]),i("v-btn",{attrs:{color:"primary"},on:{click:t.triggerInput}},[i("v-icon",{staticClass:"mr-1"},[t._v(" mdi-image-plus ")]),t._v(" "+t._s(t.opts.selectBtnLabel)+" ")],1)],1),t.file?i("div",{staticClass:"cropper-card"},[i("v-toolbar",{class:"cropper-toolbar "+t.opts.toolbarClasses},[t.opts.isShowToolbar?i("div",[i("v-btn",{attrs:{icon:"",title:t.opts.selectBtnLabel},on:{click:t.triggerInput}},[i("v-icon",[t._v("mdi-image-plus")])],1),i("v-btn",{attrs:{icon:"",title:t.opts.rotateLeftLabel},on:{click:function(e){return t.rotate(-90)}}},[i("v-icon",[t._v("mdi-restore")])],1),i("v-btn",{attrs:{icon:"",title:t.opts.rotateRightLabel},on:{click:function(e){return t.rotate(90)}}},[i("v-icon",[t._v("mdi-reload")])],1),i("v-btn",{attrs:{icon:"",title:t.opts.flipHorizontalLabel},on:{click:function(e){return t.flip("h")}}},[i("v-icon",[t._v("mdi-axis-z-rotate-counterclockwise")])],1),i("v-btn",{attrs:{icon:"",title:t.opts.flipVerticalLabel},on:{click:function(e){return t.flip("v")}}},[i("v-icon",[t._v("mdi-horizontal-rotate-counterclockwise")])],1),i("v-btn",{attrs:{icon:"",title:t.opts.clearLabel},on:{click:t.cancelCrop}},[i("v-icon",[t._v("mdi-close-thick")])],1)],1):t._e(),i("v-spacer"),i("v-btn",{staticClass:"float-end",attrs:{color:"primary"},on:{click:t.doCrop}},[i("v-icon",{staticClass:"mr-1"},[t._v(" mdi-content-save-outline ")]),t._v(" "+t._s(t.opts.saveLabel)+" ")],1)],1),t.opts.isShowFormParams?i("div",{class:"cropper-form-params "+t.opts.formParamsClasses},[i("v-card",{staticClass:"cropper-form-toolbar"},[i("v-divider"),i("div",[i("v-row",[i("v-col",{attrs:{sm:"5"}},[i("v-checkbox",{attrs:{"hide-details":"",required:"",dense:"",outlined:"",label:t.opts.circleLabel,value:t.opts.isCircle},on:{change:t.setIsCircle}})],1),i("v-col",{attrs:{sm:"5"}},[i("v-checkbox",{attrs:{required:"",dense:"","hide-details":"",outlined:"",label:t.opts.proportionalLabel,value:t.opts.isProportional},on:{change:t.setIsCircle}})],1)],1),i("v-row",[i("v-col",[i("v-select",{attrs:{dense:"",outlined:"","hide-details":"","item-text":"text","item-value":"val",items:t.listAspectRatio,label:t.opts.aspectRatioLabel,value:t.opts.aspectRatio},on:{change:t.setAspectRatio}})],1)],1),i("v-row",[i("v-col",[i("v-text-field",{attrs:{type:"number",required:"",autofocus:"",outlined:"",dense:"","hide-details":"",step:"0.01","aria-valuemax":"1",label:t.opts.qualityLabel},on:{change:function(e){return t.moveMouse()}},model:{value:t.opts.quality,callback:function(e){t.$set(t.opts,"quality",e)},expression:"opts.quality"}}),i("v-slider",{attrs:{"hide-details":"",step:"0.01",max:1},on:{change:function(e){return t.moveMouse()}},model:{value:t.opts.quality,callback:function(e){t.$set(t.opts,"quality",e)},expression:"opts.quality"}})],1)],1),i("v-expansion-panels",[i("v-expansion-panel",[i("v-expansion-panel-header",[i("v-icon",[t._v("mdi-format-list-checks")]),i("v-card-subtitle",[t._v(" "+t._s(t.opts.cropParamsLabel))])],1),i("v-expansion-panel-content",[i("v-row",[i("v-col",[i("v-text-field",{attrs:{type:"number",required:"",autofocus:"",dense:"",outlined:"","hide-details":"",label:t.opts.cropAreaWidthLabel},on:{change:t.updateCropperCord},model:{value:t.opts.cropArea.width,callback:function(e){t.$set(t.opts.cropArea,"width",e)},expression:"opts.cropArea.width"}}),i("v-slider",{attrs:{"hide-details":"",max:t.maxCropAreaWidth},on:{change:t.updateCropperCord},model:{value:t.opts.cropArea.width,callback:function(e){t.$set(t.opts.cropArea,"width",e)},expression:"opts.cropArea.width"}})],1)],1),i("v-row",[i("v-col",[i("v-text-field",{attrs:{type:"number",required:"",dense:"",autofocus:"",outlined:"","hide-details":"",label:t.opts.cropAreaHeightLabel,disabled:t.opts.isProportional},on:{change:t.updateCropperCord},model:{value:t.opts.cropArea.height,callback:function(e){t.$set(t.opts.cropArea,"height",e)},expression:"opts.cropArea.height"}}),i("v-slider",{attrs:{"hide-details":"",max:t.maxCropAreaHeight,disabled:t.opts.isProportional},on:{input:t.updateCropperCord},model:{value:t.opts.cropArea.height,callback:function(e){t.$set(t.opts.cropArea,"height",e)},expression:"opts.cropArea.height"}})],1)],1),i("v-row",[i("v-col",[i("v-text-field",{attrs:{type:"number",required:"",autofocus:"",dense:"",outlined:"","hide-details":"",label:t.opts.cropAreaXCoordLabel},on:{change:t.updateCropperCord},model:{value:t.opts.cropArea.x,callback:function(e){t.$set(t.opts.cropArea,"x",e)},expression:"opts.cropArea.x"}}),i("v-slider",{attrs:{"hide-details":"",max:t.maxCropAreaWidth},on:{change:t.updateCropperCord},model:{value:t.opts.cropArea.x,callback:function(e){t.$set(t.opts.cropArea,"x",e)},expression:"opts.cropArea.x"}})],1)],1),i("v-row",[i("v-col",[i("v-text-field",{attrs:{type:"number",required:"",dense:"",autofocus:"",outlined:"","hide-details":"",label:t.opts.cropAreaYCoordLabel},on:{change:t.updateCropperCord},model:{value:t.opts.cropArea.y,callback:function(e){t.$set(t.opts.cropArea,"y",e)},expression:"opts.cropArea.y"}}),i("v-slider",{attrs:{"hide-details":"",max:t.maxCropAreaHeight},on:{input:t.updateCropperCord},model:{value:t.opts.cropArea.y,callback:function(e){t.$set(t.opts.cropArea,"y",e)},expression:"opts.cropArea.y"}})],1)],1)],1)],1)],1),i("v-row",[i("v-col",{attrs:{sm:"5"}},[i("v-btn",{attrs:{color:"primary","hide-details":"",dense:""},on:{click:t.doubleClickCropper}},[i("v-icon",{staticClass:"mr-1"},[t._v(" mdi-crop-free ")]),t._v(" "+t._s(t.opts.fillCropAreaLabel)+" ")],1)],1)],1)],1)],1),i("div",{class:"crop-area "+t.opts.cropAreaClasses},[i("v-card",{staticClass:"cropper-preview-card"},[i("v-card-title",{staticStyle:{"place-content":"center"}},[t._v(" "+t._s(t.opts.cropAreaLabel)+" ")]),i("div",{style:{width:t.maxCropAreaWidth+"px",height:t.maxCropAreaHeight+"px"},on:{dblclick:t.doubleClickCropper}},[i("canvas",{ref:"canvas",staticStyle:{background:"#ccc"},attrs:{width:t.canvasWidth,height:t.canvasHeight},on:{mousemove:t.moveMouse,mousedown:t.startDrag,mouseup:t.stopDrag,mouseleave:function(e){t.isDragged=!1}}})])],1),i("v-card",{staticClass:"cropper-preview-card"},[i("v-card-title",{staticStyle:{"place-content":"center"}},[t._v(" "+t._s(t.opts.previewLabel)+" ")]),t.opts.isShowPreview?i("div",{staticClass:"cropper-previewArea",style:{width:t.prevDivWidth+"px",height:t.prevDivHeight+"px"}},[i("img",{style:{width:t.previewSize.w+"px",height:t.previewSize.h+"px",borderRadius:t.opts.isCircle?"50%":0},attrs:{src:t.previewImage}})]):t._e()],1)],1)],1):t._e()],1):t._e()])},p=[],h=(i("b0c0"),i("cb29"),i("b680"),i("bc3a")),n=i.n(h),c=void 0,l={name:"XCropper",props:{opts:{type:Object,default:function(){return{inputMimeTypes:["image/jpeg","image/png","image/gif"],resultMimeType:"image/jpeg",maxFileSize:8e6,layoutBreakpoint:850,maxCropperHeight:600,croppedAreaHeight:400,croppedAreaWidth:400,maxCroppedAreaWidth:400,uploadData:{},isUploadTo:!1,isPreviewOnDrag:!0,isShowPreview:!0,isShowToolbar:!0,isShowFormParams:!0,isCloseOnSave:!0,cropArea:{minWidth:8,minHeight:8,width:0,height:0,x:20,y:20},isProportional:!1,isCircle:!0,aspectRatio:1,rotation:0,maxCropAreaHeight:0,frameLineDash:[5,3],handleSize:10,quality:.65,frameStrokeColor:"rgba(255, 255, 255, 0.8)",handleFillColor:"rgba(255, 255, 255, 0.2)",handleHoverFillColor:"rgba(255, 255, 255, 0.4)",handleHoverStrokeColor:"rgba(255, 255, 255, 1)",handleStrokeColor:"rgba(255, 255, 255, 0.8)",overlayFill:"rgba(0, 0, 0, 0.5)",cropperClasses:"",toolbarClasses:"",cropAreaClasses:"",formParamsClasses:"",dropareaLabel:"Select or drop image...",selectBtnLabel:"Select image",rotateLeftLabel:"Rotate left",rotateRightLabel:"Rotate right",flipHorizontalLabel:"Flip horizontal",flipVerticalLabel:"Flip vertical",clearLabel:"Clear",saveLabel:"Save image",circleLabel:"Circle",proportionalLabel:"Proportional",aspectRatioLabel:"Aspect ratio",previewLabel:"Preview",cropAreaLabel:"Cropper area",cropParamsLabel:"Cropper params",cropAreaWidthLabel:"Width",cropAreaHeightLabel:"Height",cropAreaXCoordLabel:"X coordinate",cropAreaYCoordLabel:"Y coordinate",fillCropAreaLabel:"Full area",qualityLabel:"Quality"}}}},data:function(){return{ctx:null,file:null,over:null,image:null,fliph:null,flipv:null,canvas:null,previewImage:null,isDragged:!1,isLoading:!1,imageWidth:0,imageHeight:0,fullWidthUI:500,listAspectRatio:[{text:"1:1",val:1},{text:"3:4",val:.765},{text:"16:9",val:1.5}],cropArea:{mx:0,my:0}}},computed:{canvasHeight:function(){return this.imageRatio<=this.cropperRatio?this.maxCropAreaHeight:Math.round(this.maxCropAreaWidth/this.imageRatio)},canvasWidth:function(){return this.imageRatio>=this.cropperRatio?this.maxCropAreaWidth:Math.round(this.imageRatio*this.canvasHeight)},cropData:function(){var t,e,i,r,a=this.imageWidth/this.canvasWidth+this.imageHeight/this.canvasHeight,o=Math.round(a/.002)/1e3,s=[this.opts.rotation,this.fliph,this.flipv],p=s[0],h=s[1],n=s[2],c=this.opts.cropArea.x*o,l=this.opts.cropArea.y*o,d=this.opts.cropArea.width*o,u=this.opts.cropArea.height*o,v=this.imageWidth-c-d,g=this.imageHeight-l-u;return(0===p&&!h&&!n||180===p&&h&&n)&&(t=c,e=l),(90===p&&!h&&!n||270===p&&h&&n)&&(t=l,e=v),(180===p&&!h&&!n||0===p&&h&&n)&&(t=v,e=g),(270===p&&!h&&!n||90===p&&h&&n)&&(t=g,e=c),(0===p&&h&&!n||180===p&&!h&&n)&&(t=v,e=l),(90===p&&h&&!n||270===p&&!h&&n)&&(t=l,e=c),(180===p&&h&&!n||0===p&&!h&&n)&&(t=c,e=g),(270===p&&h&&!n||90===p&&!h&&n)&&(t=g,e=v),0===p||180===p?(i=d,r=u):(i=u,r=d),{x:t,y:e,w:i,h:r}},maxCropAreaHeight:function(){if(this.opts.maxCropAreaHeight&&this.fullWidthUI>this.opts.layoutBreakpoint)return this.opts.maxCropAreaHeight-80;var t=Math.floor(this.maxCropAreaWidth/this.imageRatio),e=this.opts.maxCropperHeight;return e&&e>100&&e<t?e-80:t},cropperRatio:function(){return Math.round(this.maxCropAreaWidth/this.maxCropAreaHeight*1e3)/1e3},maxCropAreaWidth:function(){var t=this.fullWidthUI;return this.fullWidthUI<=this.opts.layoutBreakpoint||!this.opts.isShowPreview?Math.floor(.9*t):Math.floor(.35*t)},cx:function(){var t=this.canvas.getBoundingClientRect();return this.cropArea.mx-t.left},cy:function(){var t=this.canvas.getBoundingClientRect();return this.cropArea.my-t.top},imageRatio:function(){return this.imageHeight?Math.round(this.imageWidth/this.imageHeight*1e3)/1e3:0},markers:function(){return{nw:{x:this.opts.cropArea.x-this.opts.handleSize,y:this.opts.cropArea.y-this.opts.handleSize},ne:{x:this.opts.cropArea.x+this.opts.cropArea.width-this.opts.handleSize,y:this.opts.cropArea.y-this.opts.handleSize},sw:{x:this.opts.cropArea.x-this.opts.handleSize,y:this.opts.cropArea.y+this.opts.cropArea.height-this.opts.handleSize},se:{x:this.opts.cropArea.x+this.opts.cropArea.width-this.opts.handleSize,y:this.opts.cropArea.y+this.opts.cropArea.height-this.opts.handleSize}}},prevDivHeight:function(){return this.fullWidthUI>this.opts.layoutBreakpoint?this.maxCropAreaHeight:300},prevDivWidth:function(){var t=this.fullWidthUI-24;if(this.fullWidthUI<=this.opts.layoutBreakpoint)return t;var e=Math.floor(.4*t);return e>this.opts.maxCroppedAreaWidth?this.opts.maxCroppedAreaWidth:e},previewCanvas:function(){if(!this.image||!this.resultCanvas)return!1;var t=document.createElement("canvas");t.width=this.previewSize.w,t.height=this.previewSize.h;var e=t.getContext("2d");return e.drawImage(this.resultCanvas,0,0,t.width,t.height),t},previewSize:function(){var t,e,i=this.prevDivWidth-20,r=this.prevDivHeight-20,a=Math.round(i/r*1e3)/1e3,o=Math.round(this.resultWidth/this.resultHeight*1e3)/1e3;return o>a?(t=i,e=i/o):(e=r,t=e*o),{w:Math.min(t,this.resultWidth),h:Math.min(e,this.resultHeight)}},resultCanvas:function(){if(!this.image)return!1;var t=document.createElement("canvas");t.width=this.resultWidth,t.height=this.resultHeight;var e=t.getContext("2d");e.save(),this.fliph&&(e.translate(this.resultWidth,0),e.scale(-1,1)),this.flipv&&(e.translate(0,this.resultHeight),e.scale(1,-1));var i=90===this.opts.rotation||270===this.opts.rotation,r=i?t.height:t.width,a=i?t.width:t.height;return e.translate(t.width/2,t.height/2),e.rotate(this.opts.rotation*Math.PI/180),e.drawImage(this.image,this.cropData.x,this.cropData.y,this.cropData.w,this.cropData.h,-r/2,-a/2,r,a),e.restore(),t},resultWidth:function(){var t=[this.opts.aspectRatio,this.opts.croppedAreaWidth,this.opts.croppedAreaHeight],e=t[0],i=t[1],r=t[2],a=Math.round(this.imageWidth/this.canvasWidth*1e3)/1e3,o=e||this.opts.cropArea.width/this.opts.cropArea.height;if(i&&!r)return i;if(!i&&!r)return Math.round(this.opts.cropArea.width*a);if(!i&&r)return Math.round(r*o);var s=i/r;return o>=s?i:Math.round(r*o)},resultHeight:function(){var t=[this.opts.aspectRatio,this.opts.croppedAreaWidth,this.opts.croppedAreaHeight],e=t[0],i=t[1],r=t[2],a=Math.round(this.imageHeight/this.canvasHeight*1e3)/1e3,o=e||this.opts.cropArea.width/this.opts.cropArea.height;if(r&&!i)return r;if(!i&&!r)return Math.round(this.opts.cropArea.height*a);if(!r&&i)return Math.round(i/o);var s=i/r;return o<=s?r:Math.round(i/o)}},mounted:function(){this.getFullWidth(),this.$emit("cropper-mounted"),window.addEventListener("resize",this.getFullWidth)},beforeDestroy:function(){this.$emit("cropper-before-destroy"),window.removeEventListener("resize",this.getFullWidth)},methods:{setIsCircle:function(t){t&&this.opts.isProportional&&(this.opts.isProportional=!1),t&&this.opts.aspectRatio&&(this.opts.aspectRatio=1),this.opts.isCircle=t},setAspectRatio:function(t){t&&this.opts.isCircle&&(this.opts.isCircle=!1),this.opts.isProportional=!!t,this.updateCropperCord()},setIsProportional:function(t){t&&this.opts.isCircle&&(this.opts.isCircle=!1),t&&!this.opts.aspectRatio?this.opts.aspectRatio=this.imageRatio:t||(this.opts.aspectRatio=void 0),this.updateCropperCord()},updateCropperCord:function(){this.isDragged=!0,this.moveMouse()},doubleClickCropper:function(){this.opts.cropArea.width=this.maxCropAreaWidth,this.opts.cropArea.height=this.maxCropAreaHeight,this.opts.cropArea.x=0,this.opts.cropArea.y=0},cancelCrop:function(){var t=this.$refs.fileInput;t.type="",t.type="file",this.file=!1,this.$emit("cropper-cancelled")},doCrop:function(){var t=this,e=this.resultCanvas.toDataURL(this.opts.resultMimeType,this.opts.quality),i=this.file.name.lastIndexOf("."),r=this.file.name.substring(0,i),a={originalFile:this.file,filename:r,rotation:this.opts.rotation,cropCoords:this.cropData,flippedH:this.fliph,flippedV:this.flipv,croppedImageURI:e};this.resultCanvas.toBlob((function(e){var i=new Date;if(e.lastModified=i.getTime(),e.lastModifiedDate=i,e.name=r,a.croppedFile=e,t.$emit("cropper-saved",a),t.opts.isUploadTo){var o=new FormData;for(var s in a)o.append(s,a[s]);for(var p in t.opts.uploadData)o.append(p,t.opts.uploadData[p]);n.a.post(t.opts.isUploadTo,o).then((function(e){t.$emit("cropper-uploaded",e),t.opts.closeOnSave&&(t.file=!1)}))}else t.opts.closeOnSave&&(t.file=!1)}),this.opts.resultMimeType,this.opts.quality)},drawCanvas:function(){this.ctx&&(this.drawImageOnCanvas(),this.drawOverlay(),this.drawMarkers(),this.opts.isShowPreview&&this.opts.isPreviewOnDrag&&this.previewCanvas&&(this.previewImage=this.previewCanvas.toDataURL("image/jpeg",this.opts.quality)))},drawImageOnCanvas:function(){if(this.image){this.ctx.save(),this.fliph&&(this.ctx.translate(this.canvasWidth,0),this.ctx.scale(-1,1)),this.flipv&&(this.ctx.translate(0,this.canvasHeight),this.ctx.scale(1,-1));var t=90===this.opts.rotation||270===this.opts.rotation,e=t?this.canvasHeight:this.canvasWidth,i=t?this.canvasWidth:this.canvasHeight;this.ctx.translate(this.canvasWidth/2,this.canvasHeight/2),this.ctx.rotate(this.opts.rotation*Math.PI/180),this.ctx.drawImage(this.image,-e/2,-i/2,e,i),this.ctx.restore()}},drawMarkers:function(){var t=[this.cx,this.cy],e=t[0],i=t[1],r=this.ctx;for(var a in this.canvas.style.cursor="default",this.over=!1,r.beginPath(),this.opts.isCircle?r.arc(this.opts.cropArea.x+this.opts.cropArea.width/2,this.opts.cropArea.y+this.opts.cropArea.height/2,this.opts.cropArea.width/2,0,2*Math.PI):r.rect(this.opts.cropArea.x,this.opts.cropArea.y,this.opts.cropArea.width,this.opts.cropArea.height),r.isPointInPath(e,i)&&(this.over="all",this.canvas.style.cursor="move"),r.setLineDash(this.opts.frameLineDash),r.strokeStyle=this.opts.frameStrokeColor,r.stroke(),r.setLineDash([]),this.markers){var o=this.markers[a];r.beginPath(),r.rect(o.x,o.y,2*this.opts.handleSize,2*this.opts.handleSize),r.fillStyle=this.opts.handleFillColor,r.strokeStyle=this.opts.handleStrokeColor,r.isPointInPath(e,i)&&(r.fillStyle=this.opts.handleHoverFillColor,r.strokeStyle=this.opts.handleHoverStrokeColor,this.canvas.style.cursor=a+"-resize",this.over=a),r.fill(),r.stroke()}},drawOverlay:function(){var t=this.ctx,e=[this.canvasWidth,this.canvasHeight,this.opts.cropArea.y,this.opts.cropArea.x,this.opts.cropArea.height,this.opts.cropArea.width],i=e[0],r=e[1],a=e[2],o=e[3],s=e[4],p=e[5];t.fillStyle=this.opts.overlayFill,t.fillRect(0,0,i,a),t.fillRect(0,a,o,s),t.fillRect(o+p,a,i-(o+p),s),t.fillRect(0,a+s,i,r-(a+s)),this.opts.isCircle&&(t.beginPath(),t.arc(o+p/2,a+s/2,p/2,Math.PI,1.5*Math.PI),t.lineTo(o,a),t.closePath(),t.fill(),t.beginPath(),t.arc(o+p/2,a+s/2,p/2,1.5*Math.PI,2*Math.PI),t.lineTo(o+p,a),t.closePath(),t.fill(),t.beginPath(),t.arc(o+p/2,a+s/2,p/2,0,.5*Math.PI),t.lineTo(o+p,a+s),t.closePath(),t.fill(),t.beginPath(),t.arc(o+p/2,a+s/2,p/2,.5*Math.PI,Math.PI),t.lineTo(o,a+s),t.closePath(),t.fill())},dropFile:function(t){var e=t.dataTransfer.files[0];this.useFile(e)},flip:function(t){"v"===t?(this.flipv=!this.flipv,this.opts.cropArea.y=this.canvasHeight-this.opts.cropArea.y-this.opts.cropArea.height):(this.fliph=!this.fliph,this.opts.cropArea.x=this.canvasWidth-this.opts.cropArea.x-this.opts.cropArea.width),this.drawCanvas(),this.opts.isShowPreview&&!this.opts.isPreviewOnDrag&&this.previewCanvas&&(this.previewImage=this.previewCanvas.toDataURL("image/jpeg",this.opts.quality))},getFullWidth:function(){var t=this.$el.getBoundingClientRect();this.fullWidthUI=t.width,this.$nextTick(this.drawCanvas)},humanFileSize:function(t,e){void 0===e&&(e=!0);var i=e?1e3:1024;if(Math.abs(t)<i)return t+" B";var r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do{t/=i,++a}while(Math.abs(t)>=i&&a<r.length-1);return t.toFixed(1)+" "+r[a]},moveMouse:function(t){var e=0,i=0;if(t){var r=t.clientX||t.touches[0].clientX,a=t.clientY||t.touches[0].clientY;e=r-this.cropArea.mx,i=a-this.cropArea.my,this.cropArea.mx=r,this.cropArea.my=a}this.isDragged&&this.updateCoords(e,i),this.drawCanvas()},rotate:function(t){var e=[c.canvasWidth,c.canvasHeight];(c.fliph?!c.flipv:c.flipv)?c.opts.rotation-=t:c.opts.rotation+=t,c.opts.rotation>270&&(c.opts.rotation=0),c.opts.rotation<0&&(c.opts.rotation=270),c.imageWidth=c.imageHeight,c.imageHeight=c.imageWidth,c.$nextTick((function(){var t=c.canvasHeight/e[0],i=c.canvasWidth/e[1],r=c.canvasWidth-c.opts.cropArea.y*i-c.opts.cropArea.height*i,a=c.opts.cropArea.x*t,o=c.opts.cropArea.height*i*c.opts.aspectRatio,s=c.opts.cropArea.width*t*c.opts.aspectRatio;c.opts.cropArea.x=Math.round(r),c.opts.cropArea.y=Math.round(a),c.opts.cropArea.width=Math.round(o),c.opts.cropArea.height=Math.round(s),c.updateCoords(),c.drawCanvas(),c.opts.isShowPreview&&!c.opts.isPreviewOnDrag&&c.previewCanvas&&(c.previewImage=c.previewCanvas.toDataURL("image/jpeg",c.opts.quality))}))},selectFile:function(t){var e=t.currentTarget.files[0];e&&this.useFile(e),this.getFullWidth()},startCanvas:function(){var t=this;this.image?(this.canvas=this.$refs.canvas,this.ctx=this.canvas.getContext("2d"),this.opts.aspectRatio?this.opts.aspectRatio>=this.imageRatio?(this.opts.cropArea.width=Math.round(this.canvasWidth),this.opts.cropArea.height=Math.round(this.opts.cropArea.width/this.opts.aspectRatio)):(this.opts.cropArea.height=Math.round(this.canvasHeight),this.opts.cropArea.width=Math.round(this.opts.cropArea.height*this.opts.aspectRatio)):(this.opts.cropArea.width=Math.round(this.canvasWidth),this.opts.cropArea.height=Math.round(this.canvasHeight)),this.opts.cropArea.x=Math.round((this.canvasWidth-this.opts.cropArea.width)/2),this.opts.cropArea.y=Math.round((this.canvasHeight-this.opts.cropArea.height)/2),this.drawCanvas()):(this.canvas=!1,this.ctx=!1),this.opts.isShowPreview&&this.previewCanvas&&(this.previewImage=this.previewCanvas.toDataURL("image/jpeg",this.opts.quality)),this.canvas.addEventListener("touchstart",(function(e){e.preventDefault(),t.startDrag(e)})),this.canvas.addEventListener("touchend",(function(e){e.preventDefault(),t.stopDrag(e)})),this.canvas.addEventListener("touchmove",(function(e){e.preventDefault(),t.moveMouse(e)}))},startDrag:function(t){void 0!==t.touches&&(this.cropArea.mx=t.touches[0].clientX,this.cropArea.my=t.touches[0].clientY,this.drawCanvas()),this.isDragged=this.over},stopDrag:function(){this.isDragged=!1;var t=this.resultCanvas.toDataURL("image/jpeg",this.opts.quality);this.$emit("cropper-preview",t),this.opts.isShowPreview&&this.previewCanvas&&(this.previewImage=this.previewCanvas.toDataURL("image/jpeg",this.opts.quality))},triggerInput:function(){var t=this.$refs.fileInput;t.click()},updateCoords:function(t,e){var i=this.opts.cropArea.x,r=this.opts.cropArea.y,a=this.opts.cropArea.width,o=this.opts.cropArea.height,s=this.opts.aspectRatio;switch(this.isDragged){case"all":i=this.opts.cropArea.x+t,r=this.opts.cropArea.y+e;break;case"nw":i=this.opts.cropArea.x+t,r=this.opts.cropArea.y+e,a=this.opts.cropArea.width-t,o=this.opts.cropArea.height-e;break;case"ne":r=this.opts.cropArea.y+e,a=this.opts.cropArea.width+t,o=this.opts.cropArea.height-e;break;case"sw":i=this.opts.cropArea.x+t,a=this.opts.cropArea.width-t,o=this.opts.cropArea.height+e;break;case"se":a=this.opts.cropArea.width+t,o=this.opts.cropArea.height+e;break}s&&(o=a/s),(a<this.opts.cropArea.minWidth||o<this.opts.cropArea.minHeight)&&(s&&s>1?(o=this.opts.cropArea.minHeight,a=o*s):s&&s<1?(a=this.opts.cropArea.minWidth,o=a/s):(a<this.opts.cropArea.minWidth&&(a=this.opts.cropArea.minWidth),o<this.opts.cropArea.minHeight&&(o=this.opts.cropArea.minHeight))),a+i>this.canvasWidth&&(a=this.canvasWidth-i,s&&(o=a/s),a/s<this.opts.cropArea.minHeight&&s&&s>1&&(o=this.opts.cropArea.minHeight,a=o*s,i=this.canvasWidth-a),a<this.opts.cropArea.minWidth&&(a=this.opts.cropArea.minWidth,i=this.canvasWidth-a)),o+r>this.canvasHeight&&(o=this.canvasHeight-r,s&&(a=o*s),o*s<this.opts.cropArea.minWidth&&s&&s<1&&(a=this.opts.cropArea.minWidth,o=a/s,r=this.canvasHeight-o),o<this.opts.cropArea.minHeight&&(o=this.opts.cropArea.minHeight,r=this.canvasHeight-o)),i<0&&(i=0),r<0&&(r=0),this.opts.cropArea.x=i,this.opts.cropArea.y=r,this.opts.cropArea.width=a,this.opts.cropArea.height=o},useFile:function(t){if(-1!==this.opts.inputMimeTypes.indexOf(t.type))if(this.opts.maxFileSize&&t.size>this.opts.maxFileSize){var e=this.humanFileSize(t.size);this.$emit("cropper-error","File too large ("+e+")! Max file size is "+this.humanFileSize(this.opts.maxFileSize))}else this.file=t,this.$emit("cropper-file-selected",t);else this.$emit("cropper-error","Wrong file type: "+t.type)}},watch:{"opts.cropArea.width":function(){this.drawCanvas()},"opts.cropArea.x":function(){this.drawCanvas()},file:function(t){var e=this;this.opts.rotation=0,this.fliph=!1,this.flipv=!1;var i=new FileReader;i.onload=function(t){var i=new Image;i.onload=function(){e.imageWidth=i.width,e.imageHeight=i.height,e.image=i,e.loadingImage=!1,e.$nextTick(e.startCanvas)},i.onerror=function(t){e.loadingImage=!1,e.imageWidth=0,e.imageHeight=0,e.image=!1,e.file=!1,e.$emit("cropper-error","Image reading error"+t)};var r=e.$refs.fileInput;r.val="",i.src=t.target.result},i.onerror=function(t){e.file=!1,e.$emit("cropper-error","File reading error"+t)},t?i.readAsDataURL(this.file):(this.imageWidth=0,this.imageHeight=0,this.image=!1)}}},d=l,u=(i("43e7"),i("2877")),v=Object(u["a"])(d,s,p,!1,null,null,null),g=v.exports,f=i("6328"),m=i.n(f),w={data:function(){return{drawer:!0,logo:m.a}},components:{XCropper:g}},A=w,b=(i("5c0b"),Object(u["a"])(A,a,o,!1,null,null,null)),x=b.exports,C=(i("bf40"),i("41e6"),i("ce5b")),y=i.n(C);r["default"].config.productionTip=!1,r["default"].use(y.a),new r["default"]({vuetify:new y.a,render:function(t){return t(x)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";i("9c0c")},6328:function(t,e,i){t.exports=i.p+"img/x-cropper-logo-64.4a2d2dc4.png"},"9c0c":function(t,e,i){}});
//# sourceMappingURL=app.486c77d8.js.map